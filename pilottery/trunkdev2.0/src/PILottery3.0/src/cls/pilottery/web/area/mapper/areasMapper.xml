<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cls.pilottery.web.area.dao.AreasDao">

	<resultMap type="cls.pilottery.web.area.model.City" id="city">
		<id column="AREA_CODE" property="cityCode" />
		<result column="AREA_NAME" property="cityName" />
		<result column="FATHER_AREA" property="pid" />
		<result column="agency_code" property="agencyCode" />
		<result column="agency_name" property="agencyName" />
	</resultMap>
    <select id="getAreaCount" resultType="java.lang.Integer"
        parameterType="cls.pilottery.web.area.form.AreaForm"
    >
        SELECT COUNT(1) FROM INF_AREAS A WHERE 1 = 1
        <if test="areaCode != null and areaCode != ''"> AND UPPER(A.area_code) LIKE
            UPPER('%'||#{areaCode}||'%')
        </if>
        <if test="areaName != null and areaName != ''"> AND UPPER(A.area_name) LIKE
            UPPER('%'||#{areaName}||'%')
        </if>
    </select>
    <select id="getAreaList" resultType="cls.pilottery.web.area.form.AreaForm"
        parameterType="cls.pilottery.web.area.form.AreaForm"
    >
        SELECT * FROM ( SELECT C.*, ROWNUM RN FROM (SELECT A.AREA_CODE AREACODE,
        A.AREA_NAME AREANAME,
        B.AREA_NAME PARENTAREANAME,
        A.STATUS STATUS,
        A.AREA_TYPE TYPE
        FROM INF_AREAS A
        LEFT JOIN INF_AREAS B
        ON A.SUPER_AREA =
        B.AREA_CODE
        WHERE 1
        = 1
        <if test="areaCode != null and areaCode != ''"> AND UPPER(A.area_code) LIKE
            UPPER('%'||#{areaCode}||'%')
        </if>
        <if test="areaName != null and areaName != ''"> AND UPPER(A.area_name) LIKE
            UPPER('%'||#{areaName}||'%')
        </if>
        ORDER BY a.AREA_CODE <![CDATA[ ) C
        ) WHERE RN > ${beginNum} AND RN <= ${endNum} ]]>
    </select>
 
     <select id="getAreaInfoByareacode" parameterType="String" resultType="cls.pilottery.web.area.model.Areas">
    select t.area_code as areaCode, t.area_name as areaName   
		from INF_AREAS  t where t.area_code=#{areaCode}
    </select>
 
     <select id="getAreaListByareaCode" parameterType="map"  resultType="cls.pilottery.web.area.model.Areas">
		select t.area_code as areaCode, t.area_name as areaName   
	    from INF_AREAS  t where STATUS =1
	     <if test="stype==1">
	     and t.area_code!=0 
	     </if>
	     <if test="stype==2">
	     and ( t.father_area=#{areaCode}  or t.area_code=#{areaCode})
		 </if>
		 order by t.area_code
	</select>
     
     <select id="getAreaById" parameterType="map"  resultType="String">
	  		select t.area_name as areaName from INF_AREAS t where t.area_code=#{areaCode}
	</select>
	   <select id="getAreaCodeByparendId" parameterType="map" resultType="String">
      select f_om_gen_recmd_code(#{type},#{parentAreaCode}) from dual
    </select> 
    	<select id="getPareCodebyCode" parameterType="String" resultType="String">
	select t.SUPER_AREA from INF_AREAS t where 1=1 and t.area_code = #{areaCode}
	</select>
</mapper>