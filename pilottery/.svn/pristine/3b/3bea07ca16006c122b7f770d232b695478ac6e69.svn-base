<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cls.pilottery.oms.monitor.dao.MLogDao">

	<resultMap type="cls.pilottery.oms.monitor.model.TaishanLog" id="logResult">
		<id column="LOG_ID" property="logId" />
		<result column="LOG_TYPE" property="logType" />
		<result column="LOG_DATE" property="logDate" />
		<result column="LOG_DESC" property="logDesc" />
	</resultMap>
	
	<!-- 查询日志列表 -->
    <select id="getLogList" parameterType="cls.pilottery.oms.monitor.form.LogForm" resultMap="logResult">
     <![CDATA[   select *
 	 from (select tab.*, rownum rn from (select * from SYS_INTERNAL_LOG  where 1=1]]>
            <if test="logDate !='' and logDate !=null ">
                and TO_CHAR(log_date,'yyyy-mm-dd') like '%${logDate}%'
            </if>
                ORDER BY LOG_ID DESC
                <![CDATA[ ) TAB ) where rn > ${beginNum} and rn <= ${endNum} ]]>
    </select>

    <select id="getLogCount" parameterType="cls.pilottery.oms.monitor.form.LogForm" resultType="int">
        <![CDATA[SELECT COUNT(1)  FROM  SYS_INTERNAL_LOG a where 1=1]]>
            <if test="logDate !='' and logDate !=null ">
                and TO_CHAR(a.log_date,'yyyy-mm-dd')  like '%${logDate}%'
            </if>
    </select>
	
   <!--  <delete id="clearDate">
    	DELETE FROM MMON_TAISHAN_LOG
    </delete> -->
</mapper>
