package cls.taishan.web.dao;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.support.rowset.SqlRowSet;

import lombok.Getter;
import lombok.Setter;

@Setter
@Getter
public class wingChargeOutputDao {
	private int errorCode;
	private String errorMessage;
	private long balance;
	private long fee;
	private String exchange;
	private String resFlow;
	private String wingFlow;
	
	private JdbcTemplate jdbcTemplate;
	
	public wingChargeOutputDao(JdbcTemplate jdbcTemplate){
		this.jdbcTemplate = jdbcTemplate;
	}
	
	public void getDataFromDB(String eTradeFlow){
		String sql = "select balance, fee, exchange_context, wing_trans_id from trd_wing_record where e_trade_flow = ?";
		
		SqlRowSet r = jdbcTemplate.queryForRowSet(sql, eTradeFlow);
		if (r.next()){
			balance = r.getLong(1);
			fee = r.getLong(2);
			exchange = r.getString(3);
			wingFlow = r.getString(4);
			resFlow = eTradeFlow;
		}
	}

	@Override
	public String toString() {
		return "wingChargeOutput [errorCode=" + errorCode + ", errorMessage=" + errorMessage + ", balance=" + balance
				+ ", fee=" + fee + ", exchange=" + exchange + ", resFlow=" + resFlow + ", wingFlow=" + wingFlow + "]";
	}

}
